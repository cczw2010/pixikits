{"version":3,"file":"pixikits.js","sources":["src/global.js","src/eventsExt.js","src/keepScreen.js","src/ui-slider.js","src/ui-scroller.js","src/index.js"],"sourcesContent":["// global variable\nexport let app = null;   //Application instance\nexport let app1 = null;   //Application instance\n\n/**\n * init\n * @param {*} pixiApp  Application instance\n */\nexport function init(pixiApp){\n  app = pixiApp;\n  app1 = pixiApp;\n};\n","/**\n * 会禁用默认的interaction plugin 事件体系，换用pixijs6新增的 EventSystem.\n * 声明V7才会正式集成， 且调用初始化之前无法使用新的事件体系 EventSystem。\n * 这里引入并未不打包生效，所以需要在页面上显式的引入对应文件。\n */ \nimport * as G from \"./global.js\";\nimport { Renderer } from '@pixi/core';\nimport {EventSystem} from \"@pixi/events\";\n// If you are using the pixi.js/pixi.js-legacy bundles, you'll need to remove the interaction\n// plugin. This is not needed when using the scoped (@pixi/) packages directly.\n// delete PIXI.Renderer.__plugins.interaction;\ndelete Renderer.__plugins.interaction;\n// 初始化基础事件\nconst EventDatas = {\n  isInit:false,\n  isTap:false,\n  drag:null,\n  startGlobal:null\n};\n// 初始化\nfunction initEvent(){\n  if(EventDatas.isInit){\n    return false;\n  }\n  EventDatas.isInit = true;\n  // Install EventSystem, if not already\n  // (PixiJS 6 doesn't add it by default)\n  if (!('events' in G.app.renderer)) {\n    G.app.renderer.addSystem(EventSystem, 'events');\n  }\n  // Render stage so that it becomes the root target for UI events\n  G.app.renderer.render(G.app.stage);\n  // 确保stage区域全部可响应事件\n  G.app.stage.interactive = true;\n  G.app.stage.hitArea = G.app.renderer.screen; \n  const _dragEnd = (e)=>{\n    if(EventDatas.drag){\n      EventDatas.drag.onEnd&&EventDatas.drag.onEnd(e);\n      EventDatas.drag = null;\n    }\n    // 本次pointer周期移动距离\n    if(Math.abs(e.global.x-EventDatas.startGlobal.x)>3 || Math.abs(e.global.y-EventDatas.startGlobal.y>3)){\n      EventDatas.isTap = false;\n    }\n  };\n  G.app.stage.addEventListener('pointerdown', (e)=>{\n    EventDatas.startGlobal = e.global.clone();\n    EventDatas.isTap = true;\n    EventDatas.drag = {};\n  },true);\n  G.app.stage.addEventListener('pointermove', (e)=>{\n    if(!EventDatas.drag || !EventDatas.drag.item){\n      // _dragEnd(e);\n      return false;\n    }\n    const dragdata = EventDatas.drag;\n    const elocal = dragdata.item.parent.toLocal(e.global, null);\n    let nextPosition = dragdata.item.position.clone();\n    if(dragdata.autoMoveX){\n      nextPosition.x = elocal.x - dragdata.startOffset.x;\n    }\n    if(dragdata.autoMoveY){\n      nextPosition.y = elocal.y - dragdata.startOffset.y;\n    }\n    e.nextPosition = nextPosition;\n    e.distance = {x:elocal.x-dragdata.startLocal.x,y:elocal.y-dragdata.startLocal.y};\n    // console.log(e.nextPosition,e.distance);\n    if(dragdata.onMove &&( dragdata.onMove(e)===false)){\n      return false;\n    }\n    dragdata.item.position.set(e.nextPosition.x,e.nextPosition.y);\n  },true);\n  G.app.stage.addEventListener('pointerup', _dragEnd,true);\n  G.app.stage.addEventListener('pointerleave', _dragEnd,true);\n  G.app.stage.addEventListener('pointercancel', _dragEnd,true);\n}\n\n// ============================================= 事件部分\n/**\n * 可拖动化\n * 原始的EventSystem 移动端的拖动通用事件的movement存在bug,这里新增了下一个位置的坐标对象（event.nextPosition）\n * !!! 特别注意，如果页面翻转，movement x,y值在逻辑上是反的\n * @param {*} object   拖拽的对象\n * @param {*} params  \n *  {\n *    dragX:true,      //是否开启拖拽X\n *    dragY:true,      //是否开启拖拽Y\n *    onStart,\n *    onMove,          //返回false会阻止自动拖拽行为， event.nextPosition代表下一个位置的local坐标，e.distance都代表移动的总距离\n *    onEnd            //e.distance都代表移动的总距离\n *  }\n */\n function dragable(object,params={}){\n  if(object.isDragable){return false;}\n  object.isDragable = true;\n  object.interactive = true;\n  object.addEventListener('pointerdown', (e)=>{\n    e.preventDefault();\n    e.stopPropagation();  //必须，不然多层嵌套拖动会出现问题\n    const startLocal = e.target.parent.toLocal(e.global, null);\n    const startPosition = e.target.position;\n    const startOffset = {x:startLocal.x-startPosition.x,y:startLocal.y-startPosition.y};\n    // console.log(\"starting\",startLocal,startPosition,startOffset);\n    Object.assign(EventDatas.drag,{\n      startOffset,\n      startLocal,\n      item:object,\n      autoMoveX:params.dragX===false?false:true,\n      autoMoveY:params.dragY===false?false:true,\n      onMove:params.onMove,\n      onEnd:params.onEnd\n    });\n    params.onStart&&params.onStart(e);\n  },false);\n  // object.addEventListener('pointerup', _dragEnd);\n  // object.addEventListener('pointerout', _dragEnd);\n}\n\n/**\n *点击，eventSystem的tap和pointertap移动端并不好用，所以实现一个通用的\n * @param {*} object\n * @param {*} cb\n */\nfunction tap(object,cb){\n  if(!cb){return false;}\n  object.interactive = true;\n  if(PIXI.utils.isMobile.phone){\n    object.addEventListener(\"pointerup\",(e)=>{\n      if(EventDatas.isTap){\n        cb.bind(object)(e);\n      }\n    });\n  }else{\n    object.addEventListener(\"click\",cb);\n  }\n}\n\n\nexport {initEvent,tap,dragable};","import * as G from \"./global.js\";\nimport {Rectangle} from \"pixi.js\";\n\nexport let isSkew = false;\nlet orientation = \"v\";\n/**\n * 全屏化并保持舞台的方向\n * @param {string} direction 方向，h横向（默认），v纵向\n * @return {object} StageSize 程序逻辑意义上的宽高，比如保持横屏翻转后，高就是宽\n */\nfunction keepScreen(direction) {\n  if(direction && typeof direction==\"string\"){\n    // console.log(orientation,\"change\",orientation);\n    orientation = direction==\"h\"?\"h\":\"v\";\n  }\n  const app = G.app;\n  let wWidth = document.body.clientWidth;\n  let wHeight = document.body.clientHeight;\n\n  const isV = wWidth<wHeight;  //是否竖屏\n  isSkew = ((orientation==\"v\"&&!isV) || (orientation!=\"v\"&&isV))?true:false;\n  app.renderer.autoResize = true;    //为了确认宽高的格式正确\n  app.renderer.resize(wWidth, wHeight);\n  if(isSkew){\n    // app.stage.rotation = 1.57;\n    app.stage.angle = 90;\n    app.stage.x = wWidth;\n    app.stage.hitArea =  new Rectangle(0, 0, wHeight,wWidth);  //翻转后移动端会影响点击区域\n  }else{\n    app.stage.angle = 0;\n    app.stage.x = 0;\n    app.stage.hitArea =  app.screen;\n  }\n  // console.log(isSkew,\"isSkew\",wWidth,wHeight, app.stage.hitArea);\n\n  window.addEventListener(\"resize\",keepScreen);\n  return isSkew?{width:wHeight,height:wWidth}:{width:wWidth,height:wHeight};\n}\nexport  {keepScreen};","import {Container,Graphics} from \"pixi.js\";\nimport {dragable} from \"./eventsExt.js\";\n/**\n *拖动滚动条Slider,实例对象是容器Container的子类\n * @param {object} params\n *    length:200,     //滚动条总长度\n *    lengthBar:20,   //滚动块的长度，可根据内容区域大小比来设定\n *    width:10,       //滚动条的宽度\n *    widthBar:0,   //默认0，与with相同\n *    color:0xffffff,\n *    colorBar:0Xff3300,\n *    alpha:0.4,      //初始透明度\n *    alphaActive:0.8 //激活后的透明度\n * @param {function} cb 回调  function(percent)\n */\n class Slider extends Container{\n  constructor(params,cb){\n    super();\n    this.params = Slider.__defOptions;\n    this.percent = 0; //当前百分比\n    this.maxMovement = 0;\n    this.cb = cb;\n    // 刷新绘制slider\n    this.refresh(params);\n  \n    dragable(this.bar,{\n      dragX:false,\n      onStart:(e)=>{\n        this.setActive(true);\n      },\n      onMove:(e)=>{\n        if(this.maxMovement==0){\n          return false;\n        }\n        if(e.nextPosition.y<0){\n          e.nextPosition.y=0;\n        }\n        if(e.nextPosition.y>this.maxMovement){\n          e.nextPosition.y = this.maxMovement;\n        }\n        this.setPercent(e.nextPosition.y/this.maxMovement);\n        this.cb&&this.cb(this.percent);\n        // return false;\n      },\n      onEnd:(e)=>{\n        this.setActive(false);\n      }\n    });\n  }\n \n}\n// 重新设置参数，并刷新\nSlider.prototype.refresh = function(params={}){\n  this.params = Object.assign({},this.params,params);\n  if(this.params.widthBar <= 0){\n    this.params.widthBar = this.params.width;\n  }\n  this._drawBg();\n  this._drawBar();\n  this.alpha=this.params.alpha;\n\n  this.maxMovement = this.params.length-this.params.lengthBar;\n  this.maxMovement = this.maxMovement<0?0:this.maxMovement;\n  let percent = this.maxMovement==0?0:this.bar.position.y/this.maxMovement;\n  this.setPercent(percent);\n};\n\n/**\n * 主动设置滚动条区域的激活状态\n * @param {boolean} active  是否激活状态\n */\nSlider.prototype.setActive=function(active=ture){\n  this.alpha=active?this.params.alphaActive:this.params.alpha;\n};\n/**\n * 手动设置百分比\n */\nSlider.prototype.setPercent = function(percent,movebar=true){\n  percent =percent>1?1:(percent<0?0:percent);\n  this.percent = percent;\n  if(movebar){\n    this.bar.position.y = parseInt(this.maxMovement*percent);\n  }\n};\n// 绘制bar\nSlider.prototype._drawBar = function(){\n  if(!this.bar){\n    this.bar = this.addChild(new Graphics());\n  }\n  this.bar.clear();\n  this.bar.beginFill(this.params.colorBar)\n      .drawRoundedRect(0,0,this.params.widthBar,this.params.lengthBar,10)\n      .endFill();\n  this.bar.pivot.set(this.params.widthBar/2,0);\n};\n// 绘制bg\nSlider.prototype._drawBg = function(){\n  if(!this.bg){\n    this.bg = this.addChild(new Graphics());\n  }\n  this.bg.clear();\n  this.bg.beginFill(this.params.color)\n        .drawRoundedRect(0,0,this.params.width,this.params.length,1)\n        .endFill();\n  this.bg.pivot.set(this.params.width/2,0);\n};\n// 拖动滚动条的默认样式\nSlider.__defOptions = {\n  length:200,\n  lengthBar:50,\n  width:10,\n  widthBar:0,   //默认0，与with相同\n  color:0xffffff,\n  colorBar:0Xff3300,\n  alpha:0.6,\n  alphaActive:0.8\n};\n\nexport {Slider};","import {dragable} from \"./eventsExt.js\";\nimport {Slider} from \"./ui-slider.js\";\nimport {Container,Graphics} from \"pixi.js\";\n/**\n *滚动区域Scroller，实例是Container的子类，内容区域不满不会显示滚动条\n *通过refresh方法可以手动更新视图。通过addChild来增加内容，会自动调用refresh方法\n * @param {object} scrolParams  滚动区域设置\n *  {\n *    width:300,    \n *    height:200,\n *    x:true,             //是否开启横向滚动\n *    y:true,             //是否开启纵向滚动\n *    slideBar:false,     //开启滚动时候是否显示滚动条，设为false代表不显示，传入Slider的样式则显示滚动条（滚动条和滚动块的长度会自动计算）,默认为显示\n *    bgColor:0xFFFFFF    //不设置的话默认白色\n *  }\n */\n class Scroller extends Container{\n  constructor(scrolParams={}){\n    super();\n    this.scrollParams = Scroller.__defScrollOptions;\n    this.sliderParams = Slider.__defOptions;\n    this.hasSlider = true;\n    this.percent = {x:0,y:0};\n    // 总容器\n    this.sortableChildren = true;\n    // 内容最大滚动坐标\n    this.contentLimitPos ={x:0,y:0};\n    // 滚动条\n    this.sliders = {x:null,y:null};\n    // 内容容器\n    this.content = super.addChildAt(new Container(),0);\n    this.content.zIndex = 2;\n    // 刷新UI\n    this.refresh(scrolParams);\n    // 内容区域可拖动\n    dragable(this,{\n      dragX:this.scrollParams.x,\n      dragY:this.scrollParams.y,\n      onStart:(e)=>{\n        this.startPos = this.content.position.clone();\n        if(this.sliders.x && this.contentLimitPos.x){\n          this.sliders.x.setActive(true);\n        }\n        if(this.sliders.y && this.contentLimitPos.y){\n          this.sliders.y.setActive(true);\n        }\n      },\n      onMove:(e)=>{\n        if(this.scrollParams.x && this.contentLimitPos.x){\n          let posx = this.startPos.x+e.distance.x;\n          posx=posx>0?0:(posx<this.contentLimitPos.x?this.contentLimitPos.x:posx);\n          this.percent.x = posx/this.contentLimitPos.x;\n        }\n        if(this.scrollParams.y && this.contentLimitPos.y){\n          let posy = this.startPos.y+e.distance.y;\n          posy=posy>0?0:(posy<this.contentLimitPos.y?this.contentLimitPos.y:posy);\n          this.percent.y = posy/this.contentLimitPos.y;\n        }\n        this._refreshPercent();\n        return false;\n      },\n      onEnd:(e)=>{\n        if(this.sliders.x ){\n          this.sliders.x.setActive(false);\n        }\n        if(this.sliders.y){\n          this.sliders.y.setActive(false);\n        }\n      }\n    });\n  }\n\n  // 绘制或者更新背景\n  _drawBg (){\n    if(!this.bg){\n      this.bg = super.addChild(new Graphics());\n      this.bg.zIndex=1;\n      this.bgMask = super.addChild(new Graphics());\n      // this.bg.zIndex=1;\n    }\n    this.bg.clear();\n    this.bg.beginFill(this.scrollParams.bgColor)\n      .drawRect(0, 0, this.scrollParams.width, this.scrollParams.height)\n      .endFill();\n\n    this.bgMask.clear();\n    this.bgMask.beginFill()\n      .drawRect(0, 0, this.scrollParams.width, this.scrollParams.height)\n      .endFill();\n    this.mask = this.bgMask;\n  }\n\n  // 绘制或者更新滚动条\n  _drawSlider(){\n    const contentWidth = this.content.width;\n    const contentHeight = this.content.height;\n    const disx =this.scrollParams.width-contentWidth;\n    const disy =this.scrollParams.height-contentHeight;\n    this.contentLimitPos.x = disx>0?0:disx;\n    this.contentLimitPos.y = disy>0?0:disy;\n    // h slider\n    if(this.hasSlider && this.scrollParams.x){\n      let lengthBar = contentWidth==0?0:((this.scrollParams.width/contentWidth)*this.scrollParams.width);\n      const params = Object.assign({},this.sliderParams,{\n          length:this.scrollParams.width,\n          lengthBar\n        });  \n      if(!this.sliders.x){\n        this.sliders.x = new Slider(params,(percent)=>{\n          this.percent.x = percent;\n          this._refreshPercent();\n        });\n        this.sliders.x.zIndex=4;\n        this.sliders.x.position.set(0,this.scrollParams.height-this.sliders.x.width/2); \n        this.sliders.x.angle = -90;\n        super.addChild(this.sliders.x);\n      }else{\n        this.sliders.x.refresh(params);\n      }\n      this.sliders.x.visible=(this.sliders.x.maxMovement>0);\n    }else if(this.sliders.x){\n      this.removeChild(this.sliders.x);\n      this.sliders.x.destroy({children:true});\n      this.sliders.x = null;\n    }\n    // v slider\n    if(this.hasSlider && this.scrollParams.y){\n      let length = this.scrollParams.height;\n      // 纵向滚动条的长度会减去横向滚动条的宽度，防止重叠\n      if(this.sliders.x && this.sliders.x.maxMovement>0){\n        length=length-this.sliders.x.width;\n      }\n      let lengthBar = contentHeight==0?0:((this.scrollParams.height/contentHeight)*this.scrollParams.height);\n      let params = Object.assign({},this.sliderParams,{length,lengthBar});\n      // console.log(params);\n      if(!this.sliders.y){\n        this.sliders.y = new Slider(params,(percent)=>{\n          this.percent.y = percent;\n          this._refreshPercent();\n        });\n        this.sliders.y.zIndex=5;\n        this.sliders.y.position.set(this.scrollParams.width-this.sliders.y.width/2,0);\n        super.addChild(this.sliders.y);\n      }else{\n        this.sliders.y.refresh(params);\n      }\n      this.sliders.y.visible=(this.sliders.y.maxMovement>0);\n    }else if(this.sliders.y){\n      this.removeChild(this.sliders.y);\n      this.sliders.y.destroy({children:true});\n      this.sliders.y = null;\n    }\n    // 重置位置\n    this._refreshPercent();\n  }\n}\n// 重写addChild\nScroller.prototype.addChild = function(...childs){\n  this.content.addChild(...childs);\n  this.refresh();\n  return childs[0];\n};\n/**\n * 刷新Scroller。主要是重新计算内容尺寸和滚动条\n * Scroller.addChild 会自动计算一次，但是如果是内部的对象自己增加子对象或者自己变换尺寸并不会触发refresh ，这时候就需要自己调用刷新\n * @param object params 可以在这里重新设置参数\n */\nScroller.prototype.refresh = function(params={}){\n  this.scrollParams = Object.assign({},this.scrollParams,params);\n  this.hasSlider = this.scrollParams.slideBar?true:false;\n  if(this.hasSlider){\n    this.sliderParams = Object.assign({},this.sliderParams,params.slideBar);\n  }\n  this._drawBg();\n  this._drawSlider();\n};\n\n/**\n * 设置横向百分比\n * @param {float} percent  百分比\n */\nScroller.prototype._refreshPercent = function(){\n  if(this.sliders.x){\n    this.sliders.x.setPercent(this.percent.x);\n  }\n  if(this.sliders.y){\n    this.sliders.y.setPercent(this.percent.y);\n  }\n  this.content.position.x = this.contentLimitPos.x*this.percent.x;\n  this.content.position.y = this.contentLimitPos.y*this.percent.y;\n};\n// 默认滚动区域配置\nScroller.__defScrollOptions = {\n  width:350,\n  height:200,\n  x:true,\n  y:true,\n  slideBar:{},\n  bgColor:0xFFFFFF    //默认白色\n};\n\nexport {Scroller};","/**\n * 基于pixijs6, 该套件会禁用默认的interaction plugin 事件体系，换用pixijs6新增的 EventSystem,需要在页面上显式的引入对应文件, 且调用初始化之前无法使用新的事件体系 EventSystem\n * 需要注意的是该事件体系并未正式发布\n * 调用pixiToolHook初始化该组件，要在页面加载完之后\n */\nimport * as global from \"./global.js\";\nimport {initEvent,tap,dragable} from \"./eventsExt.js\";\nexport const VERSION = '1.0.0';\n/**\n * @namespace PixiKits\n */\n// 初始化\nexport function init(pixiApp){\n  global.init(pixiApp);\n  initEvent();\n};\nexport {tap,dragable};\nexport * from \"./keepScreen.js\";\nexport * from \"./ui-slider.js\";\nexport * from \"./ui-scroller.js\";\n\n\n"],"names":["app","Renderer","__plugins","interaction","EventDatas","isInit","isTap","drag","startGlobal","dragable","object","params","isDragable","interactive","addEventListener","e","preventDefault","stopPropagation","startLocal","target","parent","toLocal","global","startPosition","position","startOffset","x","y","Object","assign","item","autoMoveX","dragX","autoMoveY","dragY","onMove","onEnd","onStart","orientation","Slider","Container","constructor","cb","__defOptions","percent","maxMovement","refresh","this","bar","setActive","nextPosition","setPercent","prototype","widthBar","width","_drawBg","_drawBar","alpha","length","lengthBar","active","ture","alphaActive","movebar","parseInt","addChild","Graphics","clear","beginFill","colorBar","drawRoundedRect","endFill","pivot","set","bg","color","Scroller","scrolParams","scrollParams","__defScrollOptions","sliderParams","hasSlider","sortableChildren","contentLimitPos","sliders","content","super","addChildAt","zIndex","startPos","clone","posx","distance","posy","_refreshPercent","bgMask","bgColor","drawRect","height","mask","_drawSlider","contentWidth","contentHeight","disx","disy","angle","visible","removeChild","destroy","children","childs","slideBar","pixiApp","G","renderer","addSystem","EventSystem","render","stage","hitArea","screen","_dragEnd","Math","abs","dragdata","elocal","initEvent","keepScreen","direction","wWidth","document","body","clientWidth","wHeight","clientHeight","isV","isSkew","autoResize","resize","Rectangle","window","PIXI","utils","isMobile","phone","bind"],"mappings":"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"}